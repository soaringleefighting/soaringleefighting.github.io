<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>命令行参数解析的两种方法 | 飞翔的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[TOC] 前言&amp;ensp; &amp;ensp;  在实际工程使用中，命令行参数解析主要用于灵活的使用demo或库中不同功能特性，是一个非常重要的功能。本文主要讲述两种命令行参数解析的方法，重要讲述Linux平台采用getopt函数的方法进行命令行参数解析。在Linux系统中，Linux命令用法的参数解析一般采用getopt()或getopt_long()的方法进行，这种方法可以任意指定参数，不需要按顺">
<meta name="keywords" content="linux">
<meta property="og:type" content="article">
<meta property="og:title" content="命令行参数解析的两种方法">
<meta property="og:url" content="https://soaringleefighting.github.io/2019/09/07/【PE系列】命令行参数解析的两种方法/index.html">
<meta property="og:site_name" content="飞翔的个人博客">
<meta property="og:description" content="[TOC] 前言&amp;ensp; &amp;ensp;  在实际工程使用中，命令行参数解析主要用于灵活的使用demo或库中不同功能特性，是一个非常重要的功能。本文主要讲述两种命令行参数解析的方法，重要讲述Linux平台采用getopt函数的方法进行命令行参数解析。在Linux系统中，Linux命令用法的参数解析一般采用getopt()或getopt_long()的方法进行，这种方法可以任意指定参数，不需要按顺">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-08-13T15:02:32.809Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="命令行参数解析的两种方法">
<meta name="twitter:description" content="[TOC] 前言&amp;ensp; &amp;ensp;  在实际工程使用中，命令行参数解析主要用于灵活的使用demo或库中不同功能特性，是一个非常重要的功能。本文主要讲述两种命令行参数解析的方法，重要讲述Linux平台采用getopt函数的方法进行命令行参数解析。在Linux系统中，Linux命令用法的参数解析一般采用getopt()或getopt_long()的方法进行，这种方法可以任意指定参数，不需要按顺">
  
    <link rel="alternate" href="/atom.xml" title="飞翔的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.beian img{display:inline-block!important}</style><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.beian img{display:inline-block!important}</style></head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">飞翔的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://soaringleefighting.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-【PE系列】命令行参数解析的两种方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/09/07/【PE系列】命令行参数解析的两种方法/" class="article-date">
  <time datetime="2019-09-07T07:13:47.000Z" itemprop="datePublished">2019-09-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      命令行参数解析的两种方法
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>&ensp; &ensp;  在实际工程使用中，命令行参数解析主要用于灵活的使用demo或库中不同功能特性，是一个非常重要的功能。本文主要讲述两种命令行参数解析的方法，重要讲述Linux平台采用getopt函数的方法进行命令行参数解析。在Linux系统中，Linux命令用法的参数解析一般采用getopt()或getopt_long()的方法进行，这种方法可以任意指定参数，不需要按顺序指定，更加灵活。</p>
<h2 id="1、参考"><a href="#1、参考" class="headerlink" title="1、参考"></a>1、参考</h2><p><a href="https://www.gnu.org/software/libc/manual/html_node/Getopt.html" target="_blank" rel="noopener">Parsing program options using getopt</a><br><a href="https://blog.csdn.net/coding__madman/article/details/51043733" target="_blank" rel="noopener">getopt函数和getopt_long函数详解</a><br><a href="https://blog.csdn.net/qq_33850438/article/details/80172275" target="_blank" rel="noopener">浅谈linux的命令行解析参数之getopt_long函数</a></p>
<h2 id="2、命令行参数解析的两种方法"><a href="#2、命令行参数解析的两种方法" class="headerlink" title="2、命令行参数解析的两种方法"></a>2、命令行参数解析的两种方法</h2><h3 id="2-1-普通的命令行参数解析方法"><a href="#2-1-普通的命令行参数解析方法" class="headerlink" title="2.1 普通的命令行参数解析方法"></a>2.1 普通的命令行参数解析方法</h3><p>具体参见：<br><a href="https://blog.csdn.net/SoaringLee_fighting/article/details/90180846" target="_blank" rel="noopener">【PE/C系列】C工程中灵活的参数解析方式</a></p>
<p>主要是通过字符串函数strcmp和strncmp进行参数的解析。</p>
<pre><code>if(argc &gt; 1)
{
   int i = 0;
   for(i = 1; i &lt; argc; ++i)
   {
      if(!strncmp(argv[i], &quot;-h&quot;, 2) || !strncmp(argv[i], &quot;-help&quot;, 5))
      {
          print_help(argv[0]);
      }
      else if(!strncmp(argv[i], &quot;-s&quot;, 2))
      {
          width = atoi(argv[++i]);
          height = atoi(argv[++i]);
      }
      else if(!strcmp(argv[i], &quot;-ss&quot;, 3))
      {
          length = atoi(argv[++i]);
      }
   }
}</code></pre><h3 id="2-2-通过getopt函数进行命令行参数解析（仅限Linux平台）"><a href="#2-2-通过getopt函数进行命令行参数解析（仅限Linux平台）" class="headerlink" title="2.2 通过getopt函数进行命令行参数解析（仅限Linux平台）"></a>2.2 通过getopt函数进行命令行参数解析（仅限Linux平台）</h3><h4 id="2-2-1-getopt和getopt-long函数用法"><a href="#2-2-1-getopt和getopt-long函数用法" class="headerlink" title="2.2.1 getopt和getopt_long函数用法"></a>2.2.1 getopt和getopt_long函数用法</h4><p><font color="red"><strong>函数声明：</strong></font></p>
<pre><code>#include&lt;unistd.h&gt;
#include&lt;getopt.h&gt;          /*所在头文件 */
/*函数声明*/
int getopt(intargc, char * const argv[], const char *optstring);
int getopt_long(int argc, char * const argv[], const char *optstring,
                          const struct option *longopts, int*longindex);
int getopt_long_only(int argc, char * const argv[],const char *optstring,
                          const struct option *longopts, int*longindex);
 /*系统声明的全局变量 */
extern char *optarg;        
extern int optind, opterr, optopt;</code></pre><p><font color="red"><strong>全局变量的作用：</strong></font></p>
<ul>
<li>Variable: int <strong>opterr</strong><br>参数opterr不等于0，在参数解析时遇到未知选项或者缺少必要参数时，会打印错误信息给标准错误流。<br>参数opterrr等于0，不会打印任何信息，但是仍然返回？表示错误信息。<br>If the value of this variable is nonzero, then getopt prints an error message to the standard error stream if it encounters an unknown option character or an option with a missing required argument. This is the default behavior. If you set this variable to zero, getopt does not print any messages, but it still returns the character ? to indicate an error.</li>
</ul>
<ul>
<li><p>Variable: int <strong>optopt</strong> 表示最后一个未知选项。<br>When getopt encounters an unknown option character or an option with a missing required argument, it stores that option character in this variable. You can use this for providing your own diagnostic messages.</p>
</li>
<li><p>Variable: int <strong>optind</strong> 表示argv数组中下一个元素的索引。<br>This variable is set by getopt to the index of the next element of the argv array to be processed. Once getopt has found all of the option arguments, you can use this variable to determine where the remaining non-option arguments begin. The initial value of this variable is 1.</p>
</li>
<li><p>Variable: char * <strong>optarg</strong> 表示指向当前选项参数的指针。<br>This variable is set by getopt to point at the value of the option argument, for those options that accept arguments.</p>
</li>
</ul>
<p><font color="red"><strong>getopt函数用法：只支持短选项 -a</strong></font></p>
<p>具体参考：<a href="https://www.gnu.org/software/libc/manual/html_node/Using-Getopt.html#Using-Getopt" target="_blank" rel="noopener">Using-Getopt</a></p>
<pre><code>#include&lt;unistd.h&gt;
int getopt(int argc, char * const argv[], const char *optstring);</code></pre><p>getopt函数用于从argc和argv[]指定的参数列表中获取下一个选项参数。</p>
<p>参数<strong>optstring</strong>: 比如getopt(argc, argv, “td:ch:q::”)</p>
<ol>
<li>单个字符，表示选项，这里一共有t、d、c、h、q五个选项；</li>
<li>单个字符后接一个冒号“：”表示该选项后必须跟一个参数，参数紧跟在选项后或者以空格隔开；</li>
<li>单个字符后跟两个冒号，表示该选项后可以跟一个参数，也可以不跟，如果后边跟一个参数，参数必须紧跟在选项后不能以空格隔开。</li>
</ol>
<p><strong>返回值：</strong><br>The getopt function returns the option character for the next command line option. When no more option arguments are available, it returns -1.</p>
<p><font color="red"><strong>getopt_long函数用法：支持短选项和长选项--all</strong></font></p>
<p>具体参考：<a href="https://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Options.html#Getopt-Long-Options" target="_blank" rel="noopener">Getopt-Long-Options</a></p>
<pre><code>#include&lt;getopt.h&gt;          /*所在头文件 */
int getopt_long(int argc, char * const argv[], const char *optstring,
                          const struct option *longopts, int*longindex);</code></pre><ul>
<li>参数optstring表示短选项参数；</li>
<li>参数longopts表示长选项参数；</li>
<li>参数longindex表示选项索引（即longopts的下标值）。</li>
</ul>
<p>举个栗子：</p>
<pre><code>struct option
{  
     const char *name;     //表示选项的名称
     int         has_arg;  //表示选项后面是否携带参数。该参数有三个不同值：
     //no_argument(或者是0)；required_argument(或者是1)；optional_argument(或者是2)
     int        *flag;   // 空或者非空。
      //a:如果参数为空NULL，那么当选中某个长选项的时候，getopt_long将返回val值。
      // b:如果参数不为空，那么当选中某个长选项的时候，getopt_long将返回0，并且将flag指针参数指向val值。
     int         val;   //表示指定函数找到该选项时的返回值，或者当flag非空时指定flag指向的数据的值val
};  
eg:
 static struct option longOpts[] = {
      { &quot;daemon&quot;, no_argument, NULL, &#39;D&#39; },
      { &quot;dir&quot;, required_argument, NULL, &#39;d&#39; },
      { &quot;out&quot;, required_argument, NULL, &#39;o&#39; },
      { &quot;log&quot;, required_argument, NULL, &#39;l&#39; },
      { &quot;split&quot;, required_argument, NULL, &#39;s&#39; },
      { &quot;http-proxy&quot;, required_argument, &amp;lopt, 1 },
      { &quot;http-user&quot;, required_argument, &amp;lopt, 2 },
      { &quot;http-passwd&quot;, required_argument, &amp;lopt, 3 },
      { &quot;http-proxy-user&quot;, required_argument, &amp;lopt, 4 },
      { &quot;http-proxy-passwd&quot;, required_argument, &amp;lopt, 5 },
      { &quot;http-auth-scheme&quot;, required_argument, &amp;lopt, 6 },
      { &quot;version&quot;, no_argument, NULL, &#39;v&#39; },
      { &quot;help&quot;, no_argument, NULL, &#39;h&#39; },
      { 0, 0, 0, 0 }
    };</code></pre><p><font color="red"><strong>getopt_long_only函数用法：只支持长选项--all</strong></font></p>
<pre><code>#include&lt;getopt.h&gt;          /*所在头文件 */
int getopt_long_only(int argc, char * const argv[],const char *optstring,
                          const struct option *longopts, int*longindex);</code></pre><h4 id="2-2-2-实例用法Demo"><a href="#2-2-2-实例用法Demo" class="headerlink" title="2.2.2 实例用法Demo"></a>2.2.2 实例用法Demo</h4><p>参考：<br><a href="https://www.gnu.org/software/libc/manual/html_node/Example-of-Getopt.html#Example-of-Getopt" target="_blank" rel="noopener">Example-of-Getopt</a><br><a href="https://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Option-Example.html#Getopt-Long-Option-Example" target="_blank" rel="noopener">Getopt-Long-Option-Example</a></p>
<p><strong>1、GNUC Linux提供的Demo:</strong></p>
<pre><code>#include &lt;ctype.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;

int main (int argc, char **argv)
{
  int aflag = 0;
  int bflag = 0;
  char *cvalue = NULL;
  int index;
  int c;

  opterr = 0;

  while ((c = getopt (argc, argv, &quot;abc:&quot;)) != -1)
    switch (c)
      {
      case &#39;a&#39;:
        aflag = 1;
        break;
      case &#39;b&#39;:
        bflag = 1;
        break;
      case &#39;c&#39;:
        cvalue = optarg;
        break;
      case &#39;?&#39;:
        if (optopt == &#39;c&#39;)
          fprintf (stderr, &quot;Option -%c requires an argument.\n&quot;, optopt);
        else if (isprint (optopt))
          fprintf (stderr, &quot;Unknown option `-%c&#39;.\n&quot;, optopt);
        else
          fprintf (stderr,
                   &quot;Unknown option character `\\x%x&#39;.\n&quot;,
                   optopt);
        return 1;
      default:
        abort ();
      }

  printf (&quot;aflag = %d, bflag = %d, cvalue = %s\n&quot;,
          aflag, bflag, cvalue);

  for (index = optind; index &lt; argc; index++)
    printf (&quot;Non-option argument %s\n&quot;, argv[index]);
  return 0;
}</code></pre><p><strong>2、实例Demo:</strong></p>
<pre><code>static const char *short_options = &quot;ABCDEb:c:d:f:I:i:L:M:m:n:r:s:T:t:vy:&quot;;
/*!
 * @brief `-A --streamA` : Specify the following options are for stream A
 */
#define STREAM_A_OPTION \
    {&quot;streamA&quot;,    NO_ARG,        0,    &#39;A&#39;},

/*!
 * @brief `-B --streamB` : Specify the following options are for stream B
 */
#define STREAM_B_OPTION \
    {&quot;streamB&quot;,    NO_ARG,     0,    &#39;B&#39;},

/*!
 * @brief `-C --streamC` : Specify the following options are for stream C
 */
#define STREAM_C_OPTION \
    {&quot;streamC&quot;,    NO_ARG,        0,    &#39;C&#39;},

/*!
 * @brief `-D --streamD` : Specify the following options are for stream D
 */
#define STREAM_D_OPTION \
    {&quot;streamD&quot;,    NO_ARG,        0,    &#39;D&#39;},

/*!
 * @brief `-E --streamE` : Specify the following options are for stream E
 */
#define STREAM_E_OPTION \
    {&quot;streamE&quot;,    NO_ARG,        0,    &#39;E&#39;},

/*!
 * @brief `-t --type` : Specify the supported EFM type, 0: YUV File, 1: YUV Capture, 2: YUV RAW, 3: RGB RAW
 */
#define TYPE_OPTION \
    {&quot;type&quot;,    HAS_ARG,    0,    &#39;t&#39;},

/*!
 * @brief `-b --buffer` : Specify the source buffer for YUV Capture
 */
#define BUFFER_OPTION \
    {&quot;buffer&quot;,    HAS_ARG,    0,    &#39;b&#39;},

/*!
 * @brief `-f --yuv-format` : Specify YUV format of the YUV input file for YUV File
 */
#define YUV_FORMAT_OPTION \
    {&quot;yuv-format&quot;,    HAS_ARG,    0,    &#39;f&#39;},

/*!
 * @brief `-y --yuv-input` : Specify YUV input file path for YUV File, if multi input files, please
 * input prefix, like xxx_0.yuv, xxx_1.yuv, please input xxx
 */
#define YUV_INPUT_OPTION \
    {&quot;yuv-input&quot;,    HAS_ARG,    0,    &#39;y&#39;},

/*!
 * @brief `-i --raw-input` : pecify raw input (RGB or YUV) file path, if multi input files, please
 * input prefix, like xxx_0.raw, xxx_1.raw, please input xxx
 */
#define RAW_INPUT_OPTION \
    {&quot;raw-input&quot;,    HAS_ARG,    0,    &#39;i&#39;},

/*!
 * @brief `-m --me1-input` : Specify ME1 input file path for YUV File, if multi input files, please
 * input prefix, like xxx_0.me1, xxx_1.me1, please input xxx
 */
#define ME1_INPUT_OPTION \
    {&quot;me1-input&quot;,    HAS_ARG,    0,    &#39;m&#39;},

/*!
 * @brief `-M --me0-input` : Specify ME0 input file path for YUV File, if multi input files, please
 * input prefix, like xxx_0.me0, xxx_1.me0, please input xxx
 */
#define ME0_INPUT_OPTION \
    {&quot;me0-input&quot;,    HAS_ARG,    0,    &#39;M&#39;},

/*!
 * @brief `-n --frame-num` [&gt;0]: Specify frame number to be encoded
 */
#define FRAME_NUM_OPTION \
    {&quot;frame-num&quot;,    HAS_ARG,    0,    &#39;n&#39;},

/*!
 * @brief `-s --frame-size` [resulotion]: Specify the frame resolution for YUV/RAW file
 */
#define FRAME_SIZE_OPTION \
    {&quot;frame-size&quot;,    HAS_ARG,    0,    &#39;s&#39;},

/*!
 * @brief `-r --frame-rate` : Specify the frame rate of YUV input file for YUV File
 */
#define FRAME_RATE_OPTION \
    {&quot;frame-rate&quot;,    HAS_ARG,    0,    &#39;r&#39;},

/*!
 * @brief `-I --file-index` [m~n]: Specify the input file index
 */
#define FILE_INDEX_OPTION \
    {&quot;file-index&quot;,    HAS_ARG,    0,    &#39;I&#39;},

/*!
 * @brief `-L --loop-num` [&gt;0]: Specify the loop num
 */
#define LOOP_NUM_OPTION \
    {&quot;loop-num&quot;,    HAS_ARG,    0,    &#39;L&#39;},

/*!
 * @brief `-c --copy-method` [0|1]: Specify the copy method for YUV Capture, 0: GDMA, 1: ARM
 */
#define COPY_METHOD_OPTION \
    {&quot;copy-method&quot;,    HAS_ARG,    0,    &#39;c&#39;},

/*!
 * @brief `-T --feed-type` [0|1]: Specify the YUV feed type for YUV File, 0: Normal, 1: Repeate
 */
#define FEED_TYPE_OPTION \
    {&quot;feed-type&quot;,    HAS_ARG,    0,    &#39;T&#39;},

/*!
 * @brief `-d --me-method` [0|1]: Specify the method of me downscale, 0: Normal, 1: Neon, default 0
 */
#define ME_METHOD_OPTION \
    {&quot;me-method&quot;,    HAS_ARG,    0,    &#39;d&#39;},

/*!
 * @brief `-v --verbose` : Print more information
 */
#define VERBOSE_OPTION \
    {&quot;verbose&quot;,    NO_ARG,    0,    &#39;v&#39;},

/*! @} */

static struct option long_options[] = {
    STREAM_A_OPTION
    STREAM_B_OPTION
    STREAM_C_OPTION
    STREAM_D_OPTION
    STREAM_E_OPTION
    TYPE_OPTION
    BUFFER_OPTION
    YUV_FORMAT_OPTION
    YUV_INPUT_OPTION
    RAW_INPUT_OPTION
    ME1_INPUT_OPTION
    ME0_INPUT_OPTION
    FRAME_NUM_OPTION
    FRAME_SIZE_OPTION
    FRAME_RATE_OPTION
    FILE_INDEX_OPTION
    LOOP_NUM_OPTION
    COPY_METHOD_OPTION
    FEED_TYPE_OPTION
    ME_METHOD_OPTION
    VERBOSE_OPTION
    {0,    0,    0,    0},
};
int init_param(int argc, char **argv)
{
    int ch, value;
    int width, height;
    int option_index = 0;
    u32 min_value, max_value;

    opterr = 0;
    while ((ch = getopt_long(argc, argv, short_options, long_options,
        &amp;option_index)) != -1) {
        switch (ch) {
        case &#39;A&#39;:
            current_stream = 0;
            break;
        case &#39;B&#39;:
            current_stream = 1;
            break;
        case &#39;C&#39;:
            current_stream = 2;
            break;
        case &#39;D&#39;:
            current_stream = 3;
            break;
        case &#39;E&#39;:
            current_stream = 4;
            break;
        case &#39;f&#39;:
            value = atoi(optarg);
            yuv_format = value;
            break;
        case &#39;y&#39;:
            strcpy(yuv_name, optarg);
            break;
        case &#39;i&#39;:
            strcpy(raw_name, optarg);
            break;
        case &#39;m&#39;:
            strcpy(me1_name, optarg);
            break;
        case &#39;M&#39;:
            strcpy(me0_name, optarg);
            break;
        case &#39;n&#39;:
            value = atoi(optarg);
            frame_num = value;
            break;
        case &#39;s&#39;:
            get_arbitrary_resolution(optarg, &amp;width, &amp;height);
            frame_size.width = width;
            frame_size.height = height;
            break;
        case &#39;r&#39;:
            frame_rate = atoi(optarg);
            break;
        case &#39;c&#39;:
            mem_cpy_type = atoi(optarg);
            break;
        case &#39;v&#39;:
            verbose = 1;
            break;
        default:
            printf(&quot;unknown option found: %c\n&quot;, ch);
            return -1;
        }
    }

    return 0;
}</code></pre><hr>
<p><font color="red"><strong>THE  END!</strong></font></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2019/09/07/【PE系列】命令行参数解析的两种方法/" data-id="cl53ypd6s00nwzb061ve5r39o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/09/13/【ARM系列】ARM架构中断异常处理机制/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ARM架构中断异常处理机制
        
      </div>
    </a>
  
  
    <a href="/2019/09/01/【Codecs系列】颜色空间转换CSConvert：YUV422P转YUV422SP(NV16)/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">颜色空间转换CSConvert：YUV422P转YUV422SP(NV16)</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/视频会议/">视频会议</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/Linux工具/">Linux工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/macOS工具/">macOS工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/多线程编程/">多线程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/编译工具/">编译工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/自动化脚本/">自动化脚本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/调试工具/">调试工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Bugfix/">Bugfix</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/优化/">优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/图像处理/">图像处理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/工程化/">工程化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/开源项目/">开源项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据结构/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/编程语言/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/编解码/">编解码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/视频处理/">视频处理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/生活/规划/">规划</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/随笔/">随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/音乐/">音乐</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/读书/书单/">书单</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/读书笔记/">读书笔记</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AVS/">AVS+</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Books/">Books</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bugs/">Bugs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMake/">CMake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSConvert/">CSConvert</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CV/">CV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codecs/">Codecs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Conda/">Conda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DSP/">DSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFMPEG/">FFMPEG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDB/">GDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gnu/">Gnu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H263/">H263</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HEVC/">HEVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIPS/">MIPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MPEG2/">MPEG2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MinGW/">MinGW</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Plan/">Plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReadingList/">ReadingList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SecureCRT/">SecureCRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Solaris/">Solaris</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Think/">Think</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Video/">Video</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wasm/">Wasm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/X86/">X86</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/YUV/">YUV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/">cygwin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gprof/">gprof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meson/">meson</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mount/">mount</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sample/">sample</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/valgrind/">valgrind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windbg/">windbg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/吉他/">吉他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/年终总结/">年终总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/批处理/">批处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/视频会议/">视频会议</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARM/" style="font-size: 18.18px;">ARM</a> <a href="/tags/AVS/" style="font-size: 10.91px;">AVS+</a> <a href="/tags/Android/" style="font-size: 12.73px;">Android</a> <a href="/tags/Books/" style="font-size: 19.09px;">Books</a> <a href="/tags/Bugs/" style="font-size: 11.82px;">Bugs</a> <a href="/tags/C/" style="font-size: 12.73px;">C</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CMake/" style="font-size: 10px;">CMake</a> <a href="/tags/CSConvert/" style="font-size: 17.27px;">CSConvert</a> <a href="/tags/CV/" style="font-size: 15.45px;">CV</a> <a href="/tags/Codecs/" style="font-size: 20px;">Codecs</a> <a href="/tags/Conda/" style="font-size: 10px;">Conda</a> <a href="/tags/DSP/" style="font-size: 10px;">DSP</a> <a href="/tags/Data-Structure/" style="font-size: 14.55px;">Data Structure</a> <a href="/tags/FFMPEG/" style="font-size: 10.91px;">FFMPEG</a> <a href="/tags/GDB/" style="font-size: 10px;">GDB</a> <a href="/tags/Git/" style="font-size: 12.73px;">Git</a> <a href="/tags/Gnu/" style="font-size: 10px;">Gnu</a> <a href="/tags/H263/" style="font-size: 10px;">H263</a> <a href="/tags/HEVC/" style="font-size: 10.91px;">HEVC</a> <a href="/tags/Life/" style="font-size: 11.82px;">Life</a> <a href="/tags/MIPS/" style="font-size: 11.82px;">MIPS</a> <a href="/tags/MPEG2/" style="font-size: 10px;">MPEG2</a> <a href="/tags/MinGW/" style="font-size: 10px;">MinGW</a> <a href="/tags/Plan/" style="font-size: 10px;">Plan</a> <a href="/tags/Python/" style="font-size: 15.45px;">Python</a> <a href="/tags/ReadingList/" style="font-size: 12.73px;">ReadingList</a> <a href="/tags/SecureCRT/" style="font-size: 10px;">SecureCRT</a> <a href="/tags/Solaris/" style="font-size: 10px;">Solaris</a> <a href="/tags/Think/" style="font-size: 14.55px;">Think</a> <a href="/tags/Tools/" style="font-size: 13.64px;">Tools</a> <a href="/tags/VS/" style="font-size: 10px;">VS</a> <a href="/tags/Video/" style="font-size: 16.36px;">Video</a> <a href="/tags/Wasm/" style="font-size: 10.91px;">Wasm</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/X86/" style="font-size: 15.45px;">X86</a> <a href="/tags/YUV/" style="font-size: 14.55px;">YUV</a> <a href="/tags/cygwin/" style="font-size: 10px;">cygwin</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/gprof/" style="font-size: 10px;">gprof</a> <a href="/tags/hexo/" style="font-size: 10.91px;">hexo</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/linux/" style="font-size: 15.45px;">linux</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/makefile/" style="font-size: 15.45px;">makefile</a> <a href="/tags/meson/" style="font-size: 10px;">meson</a> <a href="/tags/mount/" style="font-size: 10px;">mount</a> <a href="/tags/sample/" style="font-size: 10px;">sample</a> <a href="/tags/shell/" style="font-size: 10.91px;">shell</a> <a href="/tags/valgrind/" style="font-size: 10.91px;">valgrind</a> <a href="/tags/windbg/" style="font-size: 10px;">windbg</a> <a href="/tags/吉他/" style="font-size: 10px;">吉他</a> <a href="/tags/年终总结/" style="font-size: 10.91px;">年终总结</a> <a href="/tags/批处理/" style="font-size: 10px;">批处理</a> <a href="/tags/视频会议/" style="font-size: 10px;">视频会议</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/28/【Python系列】自动提取特定格式的txt文本数据到excel中/">自动提取特定格式的txt文本数据到excel中</a>
          </li>
        
          <li>
            <a href="/2022/05/25/【Books系列】2022年：《慢慢变富》读书笔记/">《慢慢变富》读书笔记</a>
          </li>
        
          <li>
            <a href="/2022/03/28/【Tools系列】CMake入门基础（1）：CMake语法/">CMake入门基础（1）：CMake语法</a>
          </li>
        
          <li>
            <a href="/2022/01/23/【Books系列】2022年：《拼职场》读书笔记/">《拼职场》读书笔记</a>
          </li>
        
          <li>
            <a href="/2022/01/08/【Codecs系列】H.265:HEVC视频编码技术/">H.265/HEVC视频编码技术</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Soaring Lee<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haru02.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":20,"vOffset":50},"mobile":{"show":true,"scale":0.8},"react":{"opacity":0.7},"log":false});</script></body>
</html>