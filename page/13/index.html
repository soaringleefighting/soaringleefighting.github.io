<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>飞翔的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="CV Codecs Tools ImageProcessing">
<meta property="og:type" content="website">
<meta property="og:title" content="飞翔的个人博客">
<meta property="og:url" content="https://soaringleefighting.github.io/page/13/index.html">
<meta property="og:site_name" content="飞翔的个人博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="飞翔的个人博客">
  
    <link rel="alternate" href="/atom.xml" title="飞翔的个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.beian img{display:inline-block!important}</style><style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.beian img{display:inline-block!important}</style></head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">飞翔的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://soaringleefighting.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-【android】Android平台编译makefile编写规则" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/【android】Android平台编译makefile编写规则/" class="article-date">
  <time datetime="2018-11-13T07:13:47.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/【android】Android平台编译makefile编写规则/">Android平台编译makefile编写规则</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1、参考"><a href="#1、参考" class="headerlink" title="1、参考"></a>1、参考</h2><p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-android-build/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-cn-android-build/</a><br><a href="https://blog.csdn.net/yuanjize1996/article/details/54376228" target="_blank" rel="noopener">https://blog.csdn.net/yuanjize1996/article/details/54376228</a><br><a href="https://blog.csdn.net/xyz_lmn/article/details/6966259/" target="_blank" rel="noopener">https://blog.csdn.net/xyz_lmn/article/details/6966259/</a><br><a href="https://developer.android.google.cn/ndk/guides/stable_apis#purpose" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/stable_apis#purpose</a></p>
<p>android ndk下载：(内含ndk-build)<br><a href="https://developer.android.google.cn/ndk/downloads/" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/downloads/</a><br><a href="http://www.voidcn.com/article/p-fjfskgpc-bph.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-fjfskgpc-bph.html</a></p>
<p>说明：当前最新版本的android-ndk版本是r16b。</p>
<p>Android NDK说明：<br>主要是包括编译C/C++/ASM代码的编译器，需要按照ndk相关规则进行程序的编译。因此ndk编译器需要编写符合android规则的makefile才能编译。</p>
<h2 id="2、android平台makefile编写方法"><a href="#2、android平台makefile编写方法" class="headerlink" title="2、android平台makefile编写方法"></a>2、android平台makefile编写方法</h2><p><a href="http://android.mk/#intro" target="_blank" rel="noopener">http://android.mk/#intro</a>  该网址下面有Android.mk的详细编写方法。</p>
<p><strong>在任意目录执行NDK编译：</strong></p>
<h3 id="2-1-准备环境"><a href="#2-1-准备环境" class="headerlink" title="2.1  准备环境"></a>2.1  准备环境</h3><p>首先，你得安装了Android的NDK编译工具，假设你的NDK的根目录在 /opt/android/ndk .<br>当然，最好你能在环境变量里配置一下路径，否则使用ndk-build命令的时候，都得加上路径的前缀了。</p>
<p>修改 ~/.bashrc</p>
<pre><code class="shell">export NDK_HOME=/opt/android/ndk
export PATH=$NDK_HOME:$PATH</code></pre>
<p>然后执行：</p>
<pre><code class="shell">$ source ~/.bashrc</code></pre>
<h3 id="2-2-编写-c-文件"><a href="#2-2-编写-c-文件" class="headerlink" title="2.2 编写 .c 文件"></a>2.2 编写 .c 文件</h3><p>假设你在 ~/math 目录下编写了一个 math.c 文件，内容如下：</p>
<pre><code class="c">#include &lt;stdio.h&gt;

int add( int a , int b ) {
    return a+b;
}</code></pre>
<p>OK，后面我们就准备在 ~/math 目录下，将这个.c文件编译为Android可使用的静态库/动态库了。</p>
<h3 id="2-3-编译成动态库"><a href="#2-3-编译成动态库" class="headerlink" title="2.3 编译成动态库"></a>2.3 编译成动态库</h3><p>编写 Android.mk 文件，内容如下：</p>
<pre><code class="shell">LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := dmath
LOCAL_SRC_FILES := math.c
include $(BUILD_SHARED_LIBRARY)</code></pre>
<p>在 ~/math 目录下，执行 ndk-build 命令，参数如下：</p>
<pre><code class="shell">$ ndk-build -B  NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk</code></pre>
<p>其中，NDK_PROJECT_PATH 指定了需要编译的代码的工程目录，这里给出的是当前目录，APP_BUILD_SCRIPT给出的是Android makefile文件的路径，当然，如果你还有 Application.mk 文件的话，则可以添加</p>
<pre><code class="shell">NDK_APP_APPLICATION_MK=./Application.mk</code></pre>
<p>执行完ndk-build命令后，你会发现当前目录下，生成了 obj 和 libs 文件夹，这样，你的libdmath.so动态库就已经制作完成了，在 libs/armeabi 目录下。</p>
<h3 id="2-4-编译为静态库"><a href="#2-4-编译为静态库" class="headerlink" title="2.4  编译为静态库"></a>2.4  编译为静态库</h3><p>编译为静态库，与编译为动态库唯一的区别就是 Android.mk 文件的写法不同，另外，如果要编译为静态库，则必须有其他的代码引用该静态库代码，ndk-build才会真正执行，否则无法成功生成静态库，这里，我们编写一个 Android.mk ，将 math.c 同时编译成静态库和动态库。</p>
<pre><code class="shell">LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := smath
LOCAL_SRC_FILES := math.c
include $(BUILD_STATIC_LIBRARY)</code></pre>
<p>同样，在 ～/math 目录下执行：</p>
<pre><code class="shell">$ ndk-build NDK_PROJECT_PATH=. APP_BUILD_SCRIPT=./Android.mk</code></pre>
<p>你会在生成的 libs/armeabi 目录下看到动态库libdmath.so，在 obj/local/armeabi 目录下看到静态库 libsmath.a。</p>
<h3 id="2-5-编译成可执行文件"><a href="#2-5-编译成可执行文件" class="headerlink" title="2.5 编译成可执行文件"></a>2.5 编译成可执行文件</h3><p>大部分编译规则与动静态库的书写方法一样，主要是加上下面语句：</p>
<pre><code class="shell">include $(BUILD_EXECUTABLE)</code></pre>
<h2 id="3、常用NDK命令行参数："><a href="#3、常用NDK命令行参数：" class="headerlink" title="3、常用NDK命令行参数："></a>3、常用NDK命令行参数：</h2><p>参考：<a href="http://blog.51cto.com/ticktick/1425857" target="_blank" rel="noopener">http://blog.51cto.com/ticktick/1425857</a></p>
<p>Android提供了NDK工具，用来编译native代码（c/c++），该工具配置好了相关的交叉编译环境和工具链，只需要你简单地编写几个.mk文件即可将你的c/c++代码编译为Android的java工程/Android手机可以识别、加载和运行的库或者应用程序。</p>
<p>默认情况下，使用NDK编译c/c++代码，需要将该代码放置到任一个Android应用工程的jni目录下，然后编写相应的Android.mk文件，并执行ndk-build命令完成编译。其实你也是可以在任意目录下去编译native代码的，只需要在ndk-build命令后面添加相应的命令行参数即可，这里给出一些常用的ndk-build命令行参数，方便大家灵活地使用NDK编译自己的native代码。</p>
<pre><code>
1. ndk-build NDK_LOG=1
用于配置LOG级别，打印ndk编译时的详细输出信息

2. ndk-build NDK_PROJECT_PATH=.
指定NDK编译的代码路径为当前目录，如果不配置，则必须把工程代码放到Android工程的jni目录下

3. ndk-build APP_BUILD_SCRIPT=./Android.mk
指定NDK编译使用的Android.mk文件

4. ndk-build NDK_APP_APPLICATION_MK=./Application.mk
指定NDK编译使用的application.mk文件

5. ndk-build clean
清除所有编译出来的临时文件和目标文件

6. ndk-build -B
强制重新编译已经编译完成的代码

7. ndk-build NDK_DEBUG=1
执行 debug build

8. ndk-build NDK_DEBUG=0
执行 release build

9. ndk-build NDK_OUT=./mydir
指定编译生成的文件的存放位置

10. ndk-build -C /opt/myTest/
到指定目录编译native代码   </code></pre><h2 id="4、ndk工程目录编译后libs与obj目录下库文件的区别"><a href="#4、ndk工程目录编译后libs与obj目录下库文件的区别" class="headerlink" title="4、ndk工程目录编译后libs与obj目录下库文件的区别"></a>4、ndk工程目录编译后libs与obj目录下库文件的区别</h2><p>参考：<a href="https://blog.csdn.net/bidgod/article/details/6930440" target="_blank" rel="noopener">https://blog.csdn.net/bidgod/article/details/6930440</a><br>在执行NDK编译之后，编译器会生成libs和obj两个目录，并且libs/armeabi中和obj/local/armeabi中都包含可执行文件和动态库，区别何在呢？</p>
<blockquote>
<p>As part of the build process, the files in the libs folder have been stripped of symbols and debugging information. So you’ll want to keep two copies of each of your .so files: One from the libs folder to install on the Android device, and one from the obj folder to install for GDB to get symbols from.<br>libs目录下生成的库是剥离了符号表与调试信息的，而obj下的库是带有调试信息的。</p>
</blockquote>
<h2 id="5、Android-mk和Application-mk说明"><a href="#5、Android-mk和Application-mk说明" class="headerlink" title="5、Android.mk和Application.mk说明"></a>5、Android.mk和Application.mk说明</h2><p>关于Application.mk , Android.mk和JNI的介绍可参考：<br><a href="https://developer.android.google.cn/ndk/guides/android_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/android_mk</a><br><a href="https://developer.android.google.cn/ndk/guides/application_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/application_mk</a><br>通用模块编译可以采用Android_lib.mk，Android_app.mk和common.mk以及Application.mk采用ndk-build进行编译。<br><strong>libmpeg2解码器的Android平台编译：</strong><br><a href>libmpeg2解码器的Android平台编译</a><br>示例：<br>common.mk:设置源文件目录以及头文件目录：配置LOCAL_C_INCLUDES和LOCAL_SRC_FILES.<br>Android_lib.mk:设置编译参数、特定平台编译参数、编译动静态库配置：配置LOCAL_PATH，LOCAL_MODULE，LOCAL_CFLAGS，LOCAL_CPPFLAGS。<br>Application.mk：设置APP_ABI，APP_PLATFORM和NDK_TOOLCHAIN_VERSION等。<br><font color="red"> 补充说明及注意事项：<br>汇编(.asm,.S,.s)文件的编译参数设置：<strong>LOCAL_ASMFLAGS</strong><br>C文件编译参数设置：<strong>LOCAL_CFLAGS</strong><br>C++文件编译参数设置：<strong>LOCAL_CPPFLAGS</strong><br>链接器参数设置：<strong>LOCAL_LDFLAGS</strong><br> </font></p>
<h2 id="6、ndk-build的编译选项"><a href="#6、ndk-build的编译选项" class="headerlink" title="6、ndk-build的编译选项"></a>6、ndk-build的编译选项</h2><p><a href="https://developer.android.google.cn/ndk/guides/ndk-build" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/ndk-build</a></p>
<p>所有给ndk-build的选项都会直接传给GNU Make，由make运行NDK的编译脚本。几个常见调用方式如下：</p>
<pre><code> ndk-build clean 清掉二进制文件
  ndk-build NDK_DEBUG=1     编译为可调试版的二进制文件
  ndk-build NDK_DEBUG=0     编译为release版
  ndk-build V=1             执行ndk-build且打印出它所执行的详细编译命令。
  ndk-build -B              强制重新编译
  ndk-build -B V=1          -B 和 V=1 的组合
  ndk-build NDK_LOG=1        打印出内部的NDK日志信息（用于调试NDK自己）
  ndk-build NDK_APPLICATION_MK=&lt;文件路径&gt;      用这里指定的路径寻找Application.mk文件
  ndk-build -C &lt;project路径&gt;  先cd进入&lt;project路径&gt;，然后执行ndk-build。</code></pre><p><strong>jni中如何指定编译器：</strong><br>在jni/Application.mk中添加</p>
<pre><code>NDK_TOOLCHAIN_VERSION :=4.9</code></pre><p>NDK_TOOLCHAIN_VERSION. Define this variable as 4.9 to select that version of the GCC compiler. Define this variable as clang to select the Clang compiler,</p>
<h2 id="7、编译脚本"><a href="#7、编译脚本" class="headerlink" title="7、编译脚本"></a>7、编译脚本</h2><p><a href="https://soaringleefighting.github.io/2018/11/13/%E3%80%90android%E3%80%91Android%E5%B9%B3%E5%8F%B0%E9%80%9A%E7%94%A8%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/">Android平台通用编译环境</a></p>
<h2 id="8、编译模板"><a href="#8、编译模板" class="headerlink" title="8、编译模板"></a>8、编译模板</h2><p><a href="https://soaringleefighting.github.io/2018/11/13/%E3%80%90android%E3%80%91Android%E5%B9%B3%E5%8F%B0%E9%80%9A%E7%94%A8%E7%BC%96%E8%AF%91%E6%A8%A1%E6%9D%BF%20/">Android平台通用编译模板</a></p>
<p>更多参考网址：<br><a href="https://www.cnblogs.com/wanghuaijun/p/8092747.html" target="_blank" rel="noopener">https://www.cnblogs.com/wanghuaijun/p/8092747.html</a><br><a href="https://blog.csdn.net/listener51/article/details/84026778" target="_blank" rel="noopener">https://blog.csdn.net/listener51/article/details/84026778</a><br><a href="https://www.tuicool.com/articles/QZJ3qa" target="_blank" rel="noopener">https://www.tuicool.com/articles/QZJ3qa</a><br><a href="https://blog.csdn.net/crash163/article/details/52228412" target="_blank" rel="noopener">https://blog.csdn.net/crash163/article/details/52228412</a></p>
<h2 id="9、Android平台编译注意事项"><a href="#9、Android平台编译注意事项" class="headerlink" title="9、Android平台编译注意事项"></a>9、Android平台编译注意事项</h2><ol>
<li>当前最新版本的android-ndk版本是r16b。将x86纯汇编代码编译为x86_64平台Android程序时，报出如下问题：<pre><code>Android.mk: Unsupported source file extensions for &quot;xxxxxxxxxx&quot;</code></pre></li>
</ol>
<p><strong>原因：</strong> 采用ndk版本为r10。该版本不支持x86_64平台上的asm汇编文件的编译，不识别asm格式的文件。这样会导致编译时忽略掉asm文件的编译。<br><strong>解决方案：</strong> 经过测试，r10，r10b都不支持x86_64平台上的asm汇编编译，r10e和更高版本的ndk支持x86_64平台上的asm汇编编译。</p>
<hr>
<h2 id="THE-END"><a href="#THE-END" class="headerlink" title="THE  END!"></a><font color="red"><strong>THE  END!</strong></font></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/13/【android】Android平台编译makefile编写规则/" data-id="cl53ypd7j00o5zb06nj4sie8o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【android】Android平台通用编译环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/【android】Android平台通用编译环境/" class="article-date">
  <time datetime="2018-11-13T07:13:47.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/【android】Android平台通用编译环境/">Android平台通用编译环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1、Android-NDK下载：-内含ndk-build"><a href="#1、Android-NDK下载：-内含ndk-build" class="headerlink" title="1、Android NDK下载：(内含ndk-build)"></a>1、Android NDK下载：(内含ndk-build)</h2><p><a href="https://developer.android.google.cn/ndk/downloads/" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/downloads/</a><br><a href="http://www.voidcn.com/article/p-fjfskgpc-bph.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-fjfskgpc-bph.html</a><br><a href="https://developer.android.google.cn/ndk/guides/stable_apis#purpose" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/stable_apis#purpose</a></p>
<h2 id="2、Android平台通用编译环境"><a href="#2、Android平台通用编译环境" class="headerlink" title="2、Android平台通用编译环境"></a>2、Android平台通用编译环境</h2><h3 id="2-1、Linux下编译Android程序（shell脚本）"><a href="#2-1、Linux下编译Android程序（shell脚本）" class="headerlink" title="2.1、Linux下编译Android程序（shell脚本）"></a>2.1、Linux下编译Android程序（shell脚本）</h3><pre><code class="shell">#!/bin/bash
if [ $# -ne 1]; then
    echo &quot;./build.sh ndk_dir&quot;
    exit
fi

# get current dir
PJTDIR=$(pwd)

#check if we are in the ndk directory
cd $1
if [ ! -f &quot;ndk-build&quot;]; then
    echo &quot;Run this script under NDK directory\n&quot;
    exit
fi
echo &quot;------------------------clear output dir-------------------------&quot;
find $PJTDIR/obj -name &quot;*.[od]&quot; | xargs rm -rf
find $PJTDIR/obj -name &quot;*.so&quot; | xargs rm -rf
find $PJTDIR/libs -name  &quot;*.so&quot; | xargs rm -rf
find $PJTDIR/out -name &quot;*.so&quot; | xargs rm -rf

find $PJTDIR/obj -name &quot;*.[od]&quot; | xargs rm -rf
find $PJTDIR/obj -name &quot;*.a&quot; | xargs rm -rf
find $PJTDIR/libs -name  &quot;*.a&quot; | xargs rm -rf
find $PJTDIR/out -name &quot;*.a&quot; | xargs rm -rf
echo &quot;------------------------build static library----------------------&quot;
#cp $PJRDOR/jni/Android_lib.mk $PJRLIB/jni/Android.mk
./ndk-build -B -C $PJTDIR APP_BUILD_SCRIPT:=Android_lib.mk
cp  $PJTDIR/obj/local/armeabi/libxxx.a  $PJTDIR/out/armeabi/
cp  $PJTDIR/obj/local/armeabi-v7a/libxxx.a  $PJTDIR/out/armeabi-v7a/
cp  $PJTDIR/obj/local/arm64-v8a/libxxx.a  $PJTDIR/out/arm64-v8a/
cp  $PJTDIR/obj/local/x86/libxxx.a  $PJTDIR/out/x86/
cp  $PJTDIR/obj/local/x86_64/libxxx.a  $PJTDIR/out/x86_64/
cp  $PJTDIR/obj/local/mips/libxxx.a  $PJTDIR/out/mips/
cp  $PJTDIR/obj/local/mips64/libxxx.a  $PJTDIR/out/mips64/

echo &quot;------------------------build dynamic library----------------------&quot;
#cp $PJRDOR/jni/Android_lib.mk $PJRLIB/jni/Android.mk
./ndk-build -B -C $PJTDIR APP_BUILD_SCRIPT:=Android_lib.mk
cp  $PJTDIR/obj/local/armeabi/libxxx.so $PJTDIR/out/armeabi/
cp  $PJTDIR/obj/local/armeabi-v7a/libxxx.so  $PJTDIR/out/armeabi-v7a/
cp  $PJTDIR/obj/local/arm64-v8a/libxxx.so  $PJTDIR/out/arm64-v8a/
cp  $PJTDIR/obj/local/x86/libxxx.so  $PJTDIR/out/x86/
cp  $PJTDIR/obj/local/x86_64/libxxx.so  $PJTDIR/out/x86_64/
cp  $PJTDIR/obj/local/mips/libxxx.so  $PJTDIR/out/mips/
cp  $PJTDIR/obj/local/mips64/libxxx.so  $PJTDIR/out/mips64/

echo &quot;------------------------build dynamic executable----------------------&quot;
#cp $PJRDOR/jni/Android_app.mk  $PJRLIB/jni/Android.mk
./ndk-build -B -C $PJTDIR APP_BUILD_SCRIPT:=Android_app.mk
cp  $PJTDIR/obj/local/armeabi/xxx $PJTDIR/out/armeabi/
cp  $PJTDIR/obj/local/armeabi-v7a/xxx  $PJTDIR/out/armeabi-v7a/
cp  $PJTDIR/obj/local/arm64-v8a/xxx  $PJTDIR/out/arm64-v8a/
cp  $PJTDIR/obj/local/x86/xxx  $PJTDIR/out/x86/
cp  $PJTDIR/obj/local/x86_64/xxx  $PJTDIR/out/x86_64/
cp  $PJTDIR/obj/local/mips/xxx  $PJTDIR/out/mips/
cp  $PJTDIR/obj/local/mips64/xxx  $PJTDIR/out/mips64/

echo &quot;------------------------build static executable----------------------&quot;
#cp $PJRDOR/jni/Android_app_static.mk  $PJRLIB/jni/Android.mk
./ndk-build -B -C $PJTDIR APP_BUILD_SCRIPT:=Android_app_static.mk
cp  $PJTDIR/obj/local/armeabi/xxx $PJTDIR/out/armeabi/
cp  $PJTDIR/obj/local/armeabi-v7a/xxx  $PJTDIR/out/armeabi-v7a/
cp  $PJTDIR/obj/local/arm64-v8a/xxx  $PJTDIR/out/arm64-v8a/
cp  $PJTDIR/obj/local/x86/xxx  $PJTDIR/out/x86/
cp  $PJTDIR/obj/local/x86_64/xxx  $PJTDIR/out/x86_64/
cp  $PJTDIR/obj/local/mips/xxx  $PJTDIR/out/mips/
cp  $PJTDIR/obj/local/mips64/xxx  $PJTDIR/out/mips64/

echo &quot;------------------------tar---------------------&quot;
tar -zcvf $PJTDIR/out/libxxx_android_armeabi.tar.gz  -C $PJTDIR/out/armeabi/
tar -zcvf $PJTDIR/out/libxxx_android_armeabi-v7a.tar.gz  -C $PJTDIR/out/armeabi-v7a/
tar -zcvf $PJTDIR/out/libxxx_android_arm64-v8a.tar.gz  -C $PJTDIR/out/arm64-v8a/
tar -zcvf $PJTDIR/out/libxxx_android_x86.tar.gz  -C $PJTDIR/out/x86/
tar -zcvf $PJTDIR/out/libxxx_android_x86_64.tar.gz  -C $PJTDIR/out/x86_64/
tar -zcvf $PJTDIR/out/libxxx_android_mips.tar.gz  -C $PJTDIR/out/mips/
tar -zcvf $PJTDIR/out/libxxx_android_mips64.tar.gz  -C $PJTDIR/out/mips64/
echo &quot;------------------------check results---------------------&quot;
ls -l $PJTDIR/out
ls -l $PJTDIR/armeabi
ls -l $PJTDIR/armeabi-v7a
ls -l $PJTDIR/arm64-v8a
ls -l $PJTDIR/x86
ls -l $PJTDIR/x86-64
ls -l $PJTDIR/mips
ls -l $PJTDIR/mips-64</code></pre>
<p>其中：核心命令为：<br><code>./ndk-build -B -C $PJTDIR APP_BUILD_SCRIPT:=Android_lib.mk</code><br>其中，-B表示强制rebuild，-C表示Android.mk和Application.mk两个文件夹所在路径，就是指定makefile的路径，与linux中make -C dir是同一个含义，APP_BUILD_SCRIPT用于指定编译的makefile，同linux中的make -f makefile，NDK_PROJECT_PATH用于指定makefile的路径。</p>
<blockquote>
<p>注意：<br>1、无论是编译动态库、静态库还是可执行文件，都需要各自对应的Android.mk和Application.mk这两个文件。<br>2、Application.mk通常用于指定需要编译的平台的个数，比如<br>APP_ABI := x86 x86_64 armeabi armeabi-v7a arm64-v8a<br>APP_PLATFORM := android-9<br>NDK_TOOLCHAIN_VERSION := 4.9<br>3、Android.mk相当于被Applicatioin.mk调用的，即每个平台都会调用一次Android.mk产生一个相应平台的编译出来的模块。</p>
</blockquote>
<p>不同 CPU 和架构的 ABI 设置如下表所示：</p>
<table>
<thead>
<tr>
<th>CPU 和架构</th>
<th>设置</th>
</tr>
</thead>
<tbody><tr>
<td>ARMv5TE</td>
<td>armeabi</td>
</tr>
<tr>
<td>ARMv7</td>
<td>armeabi-v7a</td>
</tr>
<tr>
<td>ARMv8 AArch64</td>
<td>arm64-v8a</td>
</tr>
<tr>
<td>i686</td>
<td>x86</td>
</tr>
<tr>
<td>x86-64</td>
<td>x86_64</td>
</tr>
<tr>
<td>mips32 (r1)</td>
<td>mips</td>
</tr>
<tr>
<td>mips64 (r6)</td>
<td>mips64</td>
</tr>
<tr>
<td>全部</td>
<td>all</td>
</tr>
</tbody></table>
<h3 id="2-2、Window下编译Android程序（Python脚本）"><a href="#2-2、Window下编译Android程序（Python脚本）" class="headerlink" title="2.2、Window下编译Android程序（Python脚本）"></a>2.2、Window下编译Android程序（Python脚本）</h3><p>在没有shell环境情况下，采用windows环境下的python脚本：</p>
<pre><code class="python">//cmd=&quot;ndk-build -B -C ./ NDK_PROJECT_PATH=./ APP_BUILD_SCRIPT=./Android.mk&quot;
#coding=utf8
import os
import sys
import glob
import shutil
import platform
from sys import argv

share_lib_name = &#39;libxxx.so&#39;
static_lib_name =  &#39;libxxx.a&#39;
static_exe = &#39;demo&#39;
#检查是否为windows系统
def  isWindowsSys():
    return &#39;Windows&#39; in platform.system()
#检查是否为Linux系统
def  isLinuxSys():
    return &#39;Linux&#39; in platform.system()
#清空目录下的内容
def delDirFile(path):
    def i in os.listdir(path):
        file_path = os.path.join(path, i)
        if os.path.isfile(file_path):
            os.remove(file_path)
        else
            delDirFile(file_path)

def process(ndk_dir, android_dir, pure_c, delimiter):
    ndk_build = ndk_dir + delimiter + &#39;ndk-build&#39;
    app_mk = android_dir + delimiter + &#39;jni&#39; + delimiter + &#39;Application.mk&#39;
    mk_dir = android_dir + delimiter + &#39;jni&#39;
    static_lib_dir = android_dir + delimiter + &#39;obj&#39; + delimiter + &#39;local&#39; + delimiter
    out_sha_lib = android_dir + delimiter + &#39;out&#39; + delimiter
    share_lib_dir = android_dir + delimiter + &#39;obj&#39; + delimiter + &#39;local&#39; + delimiter
    out_sta_lib = android_dir + delimiter + &#39;out&#39; + delimiter
    if isWindowsSys():
        cpy = &quot;copy &quot;
    else:
        cpy = &quot;cp &quot;
# &quot;=================CLEAR OUTPUT DIR=========================&quot;
outdir_files = glob.glob(android_dir + delimiter + &#39;out&#39; + delimiter + &#39;*&#39;)
for outdir in outdir_files:
    print(outdir)
    delDelFile(outdir)
    isExist = os.path.exists(ourdir)
    if(not isExist):
        os.mkdir(outdir)

pFile = open(app_mk, &#39;w&#39;)
cmd = &#39;APP_ABI := x86 x86_64 armeabi armeabi-v7a arm64-v8a \nAPP_PLATFORM := android-9\nNDK_TOOLCHAIN_VERSION := 4.9&#39;
pFile.writeLines(cmd)
pFile.write(&#39;\n&#39;)
pFile.close()
# &quot;==================BUILD SHARED LIBRARY====================&quot;
cmd = ndk_build + &quot; -B &quot; + &quot;NDK_PROJECT_PATH:=&quot; + android_dir + &quot;APP_BUILD_SCRIPT:=&quot; + mk_dir + delimiter + &quot;Android_lib.mk&quot; + &quot; V=1 SHARED=0&quot;
print(cmd)
os.system(cmd)
cmd = cpy + share_lib_dir + &quot;x86&quot; + delimiter + share_lib_name + &quot;  &quot; + out_sha_lib + &quot;x86&quot; + delimiter
print(cmd)
os.system(cmd)
##其他平台依次类推
# &quot;==================BUILD STATIC LIBRARY====================&quot;
cmd = ndk_build + &quot; -B &quot; + &quot;NDK_PROJECT_PATH:=&quot; + android_dir + &quot;APP_BUILD_SCRIPT:=&quot; + mk_dir + delimiter + &quot;Android_lib.mk&quot;
print(cmd)
os.system(cmd)
cmd = cpy + static_lib_dir + &quot;x86&quot; + delimiter + static_lib_name + &quot;  &quot; + out_sta_lib + &quot;x86&quot; + delimiter
print(cmd)
os.system(cmd)
##其他平台依次类推
# &quot;==================BUILD STATIC EXE ====================&quot;
cmd = ndk_build + &quot; -B &quot; + &quot;NDK_PROJECT_PATH:=&quot; + android_dir + &quot;APP_BUILD_SCRIPT:=&quot; + mk_dir + delimiter + &quot;Android_app.mk&quot;
print(cmd)
os.system(cmd)
cmd = cpy + static_lib_dir + &quot;x86&quot; + delimiter + static_lib_name + &quot;  &quot; + out_sta_lib + &quot;x86&quot; + delimiter
print(cmd)
os.system(cmd)
##其他平台依次类推

##############################main函数入口######################
if __name__ == &#39;__main__&#39;:
    if(len(argv) &lt; 3):
        printf(&quot;Tips: build_android.py android_ndk_dir pure_c=0/1\n&quot;)
        exit()
    delimiter =os.path.sep
    ndk_dir = argv[1]
    pure_c = argv[2]
    android_dir = os.getcwd()
    process(ndkdir,android_dir,pure_c,delimiter)

</code></pre>
<h2 id="3、Android平台真机测试方法"><a href="#3、Android平台真机测试方法" class="headerlink" title="3、Android平台真机测试方法"></a>3、Android平台真机测试方法</h2><p><a href="https://blog.csdn.net/SoaringLee_fighting/article/details/82908698" target="_blank" rel="noopener">android真机测试方法</a></p>
<h2 id="4、Android平台通用编译模板"><a href="#4、Android平台通用编译模板" class="headerlink" title="4、Android平台通用编译模板"></a>4、Android平台通用编译模板</h2><p><a href="https://soaringleefighting.github.io/2018/11/13/%E3%80%90android%E3%80%91Android%E5%B9%B3%E5%8F%B0%E9%80%9A%E7%94%A8%E7%BC%96%E8%AF%91%E6%A8%A1%E6%9D%BF%20/">Android平台通用编译模板</a></p>
<h2 id="5、参考"><a href="#5、参考" class="headerlink" title="5、参考"></a>5、参考</h2><p><strong>关于Application.mk,Android.mk和JNI的介绍更多可参考：</strong><br><a href="https://developer.android.google.cn/ndk/guides/android_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/android_mk</a><br><a href="https://developer.android.google.cn/ndk/guides/application_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/application_mk</a><br><a href="https://developer.android.google.cn/ndk/guides/ndk-build" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/ndk-build</a><br><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-android-build/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-cn-android-build/</a><br><a href="https://blog.csdn.net/yuanjize1996/article/details/54376228" target="_blank" rel="noopener">https://blog.csdn.net/yuanjize1996/article/details/54376228</a><br><a href="https://blog.csdn.net/xyz_lmn/article/details/6966259/" target="_blank" rel="noopener">https://blog.csdn.net/xyz_lmn/article/details/6966259/</a></p>
<hr>
<h2 id="THE-END！"><a href="#THE-END！" class="headerlink" title="THE END！"></a><font color="red"><strong>THE END！</strong></font></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/13/【android】Android平台通用编译环境/" data-id="cl53ypd7o00o9zb06o2bhm6el" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【android】Android平台通用编译模板" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/【android】Android平台通用编译模板/" class="article-date">
  <time datetime="2018-11-13T07:13:47.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/【android】Android平台通用编译模板/">Android平台通用编译模板</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1、NDK编译C-C-Native代码的通用方法"><a href="#1、NDK编译C-C-Native代码的通用方法" class="headerlink" title="1、NDK编译C/C++ Native代码的通用方法"></a>1、NDK编译C/C++ Native代码的通用方法</h2><p>android编译目录关系如下：<br>jni/Android_lib.mk<br>jni/Android_app.mk<br>jni/common.mk<br>jni/Application.mk<br>libs：编译后自动创建，存放各个架构平台stripped的可执行文件和库<br>obj：编译后自动创建，存放各个架构平台not stripped的目标文件、可执行文件和库。<br>out：自己创建的目录，存放各个架构平台的动静态库和可执行文件。<br>build_android.py、build_android.sh：编译脚本 参考： <a href="https://blog.csdn.net/SoaringLee_fighting/article/details/82910083" target="_blank" rel="noopener">Android平台通用编译环境</a></p>
<p><font color="red">通用模块编译可以通过编写Android_lib.mk，Android_app.mk和common.mk以及Application.mk文件采用ndk-build进行编译。</font></p>
<p>模板如下：</p>
<h3 id="1-1-common-mk"><a href="#1-1-common-mk" class="headerlink" title="1.1 common.mk:"></a>1.1 <strong>common.mk:</strong></h3><p>设置源文件目录以及头文件目录：配置LOCAL_C_INCLUDES和LOCAL_SRC_FILES。</p>
<pre><code class="makefile">##主要指定源文件路径和头文件路径

SRC_DIR := ../../../src

##头文件路径
LOCAL_C_INCLUDES := ./                    \
            $(DIR_SRC)            \
            $(DIR_SRC)/../include        \
            $(DIR_SRC)/$(INCLUDEASM)

##纯C文件路径
C_SRCS := $(DIR_SRC)/test1.c                \
    $(DIR_SRC)/test2.c                \
    $(DIR_SRC)/test3.c                \
    $(DIR_SRC)/test4.c                \
    $(DIR_SRC)/test5.c

##汇编文件路径
A_SRCS :=

ifeq($(PURE_C),0)

#x86架构
ifeq($(findstring x86, $(TARGET_ARCH_ABI)), x86)
IFLAGS += -I$(SRC_DIR)/x86
A_SRCS += $(DIR_SRC)/x86/test1.asm            \
    $(DIR_SRC)/x86/test2.asm
endif

#arm架构
ifeq($(findstring armeabi, $(TARGET_ARCH_ABI)), armeabi)
IFLAGS += -I$(SRC_DIR)/arm
A_SRCS += $(DIR_SRC)/arm/test1.asm            \
    $(DIR_SRC)/arm/test2.asm
endif

endif

##设置汇编文件
LOCAL_SRC_FILES := $(C_SRCS) $(A_SRCS)
</code></pre>
<h3 id="1-2-Android-lib-mk"><a href="#1-2-Android-lib-mk" class="headerlink" title="1.2 Android_lib.mk:"></a>1.2 <strong>Android_lib.mk:</strong></h3><p>Android.mk 文件位于项目 jni/ 目录的子目录中，用于向构建系统描述源文件和共享库。 它实际上是构建系统解析一次或多次的微小 GNU makefile 片段。 Android.mk 文件用于定义 Application.mk、构建系统和环境变量所未定义的项目范围设置。</p>
<p>设置编译参数、特定平台编译参数、编译动静态库配置：配置LOCAL_PATH，LOCAL_MODULE，LOCAL_CFLAGS，LOCAL_CPPFLAGS。</p>
<pre><code class="makefile">LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := libxxx

##参数初始化
DEBUG ?= 0
SHARED ?= 1
INCLUDEASM :=


#设置汇编优化使能
ifeq ($(PURE_C),1)
OPTIM := 1
else
OPTIM := 0
endif

#设置GDB调试使能
ifeq ($(DEBUG),1)
GDBEN := -g
else
GDBEN := -O3
endif

#设置公用编译参数
CFLAGS := -Wall
CFLAGS += -fPIC
CFLAGS += -std=c99
CFLAGS += $(GDBEN)

#特定架构编译参数
ifeq($(TARGET_ARCH_ABI),arm64-v8a)
INCLUDEASM = aarch64
CFLAGS += -march=armv8-a
CFLAGS += -D_REENTRANT
CFLAGS += 架构相关优化宏
endif
ifeq($(TARGET_ARCH_ABI),armeabi-v7a)
INCLUDEASM = arm
CFLAGS += -march=armv7-a -mfpu=neon -marm
CFLAGS += -D_REENTRANT
CFLAGS += 架构相关优化宏
endif

ifeq($(TARGET_ARCH_ABI),x86_64)
INCLUDEASM = x86
CFLAGS += -march=x86-64 -m64 -msse -msse2 -msse3 -msse4.1
CFLAGS += -D_REENTRANT
CFLAGS += 架构相关优化宏
endif

ifeq($(TARGET_ARCH_ABI),x86)
INCLUDEASM = x86
CFLAGS += -march=i686 -m32 -msse -msse2 -msse3 -msse4.1
CFLAGS += -D_REENTRANT
CFLAGS += 架构相关优化宏
endif

#设置编译参数
LOCAL_CFLAGS := $(CFLAGS)
LOCAL_CPPFLAGS := $(CFLAGS)

#include $(LOCAL_PATH)/common.mk

#配置编译静态库、动态库
ifeq ($(SHARED),1)
include $(BUILD_SHARED_LIBRARY)
else
include $(BUILD_STATIC_LIBRARY)
endif</code></pre>
<h3 id="1-3-Android-app-mk"><a href="#1-3-Android-app-mk" class="headerlink" title="1.3 Android_app.mk:"></a>1.3 <strong>Android_app.mk:</strong></h3><p>设置编译参数、特定平台编译参数、编译可执行文件配置：配置LOCAL_PATH，LOCAL_MODULE，LOCAL_CFLAGS，LOCAL_CPPFLAGS。</p>
<pre><code class="makefile">LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := libxxx

LOCAL_C_INCLUDES :=      $(LOCAL_PATH)/../../../demo/        \
            $(LOCAL_PATH)/../../../include/


#设置公用编译参数
CFLAGS := -Wall
CFLAGS += -fPIC
CFLAGS += -std=c99
CFLAGS += $(GDBEN)

#特定架构编译参数
ifeq($(TARGET_ARCH_ABI),arm64-v8a)
INCLUDEASM = aarch64
CFLAGS += -march=armv8-a
endif
ifeq($(TARGET_ARCH_ABI),armeabi-v7a)
INCLUDEASM = arm
CFLAGS += -march=armv7-a -mfpu=neon -marm
endif

ifeq($(TARGET_ARCH_ABI),x86_64)
INCLUDEASM = x86
CFLAGS += -march=x86-64 -m64 -msse -msse2 -msse3 -msse4.1
endif

ifeq($(TARGET_ARCH_ABI),x86)
INCLUDEASM = x86
CFLAGS += -march=i686 -m32 -msse -msse2 -msse3 -msse4.1
endif

#设置编译参数
LOCAL_CFLAGS := $(CFLAGS)
LOCAL_CPPFLAGS := $(CFLAGS)
LOCAL_LDFLAGS := $(LOCAL_PATH)/../out/$(TARGET_ARCH_ABI)/libxxx.a
LOCAL_STATIC_LIBRARIES := $(LOCAL_PATH)/../out/$(TARGET_ARCH_ABI)/libxxx.a

#设置demo源文件
SRC_DIR =$(LOCAL_PATH)/../../../demo
DEMO_SRCS := $(SRC_DIR)/demo.c

LOCAL_SRC_FILES := $(DEMO_SRCS)

include $(BUILD_EXECUTABLE)</code></pre>
<h3 id="1-4-Application-mk："><a href="#1-4-Application-mk：" class="headerlink" title="1.4 Application.mk："></a>1.4 <strong>Application.mk：</strong></h3><p>设置APP_ABI，APP_PLATFORM和NDK_TOOLCHAIN_VERSION等。</p>
<pre><code class="makefile">APP_ABI := x86 x86_64 armeabi armeabi-v7a arm64-v8a
APP_PLATFORM := android-9
NDK_TOOLCHAIN_VERSION := 4.9</code></pre>
<p>系统宏用法：<br><strong>APP_ABI</strong><br>默认情况下，NDK 构建系统为 armeabi ABI 生成机器代码。 此机器代码对应于基于 ARMv5TE、采用软件浮点运算的 CPU。 您可以使用 APP_ABI 选择不同的 ABI。<br><strong>APP_PLATFORM</strong><br>此变量包含目标 Android 平台的名称。<br><strong>APP_BUILD_SCRIPT</strong><br>默认情况下，NDK 构建系统在 jni/ 下查找名称为 Android.mk 的文件。<br>如果要改写此行为，可以定义 APP_BUILD_SCRIPT 指向替代构建脚本。 构建系统始终将非绝对路径解释为 NDK 顶级目录的相对路径。<br><strong>NDK_TOOLCHAIN_VERSION</strong><br>将此变量定义为 4.9 或 4.8 以选择 GCC 编译器的版本。 64 位 ABI 默认使用版本 4.9 ，32 位 ABI 默认使用版本 4.8。要选择 Clang 的版本，请将此变量定义为 clang3.4、clang3.5 或 clang。 指定 clang 会选择 Clang 的最新版本</p>
<p>关于系统变量、宏和函数宏的用法更多可参考：<br><a href="https://developer.android.google.cn/ndk/guides/android_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/android_mk</a><br><a href="https://developer.android.google.cn/ndk/guides/application_mk" target="_blank" rel="noopener">https://developer.android.google.cn/ndk/guides/application_mk</a></p>
<hr>
<h2 id="THE-END"><a href="#THE-END" class="headerlink" title="THE  END!"></a><font color="red"><strong>THE  END!</strong></font></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/13/【android】Android平台通用编译模板/" data-id="cl53ypcy00098zb06wjxhefeg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【Codecs系列】FFmpeg中mpeg2编解码器的提取和编译测试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/11/【Codecs系列】FFmpeg中mpeg2编解码器的提取和编译测试/" class="article-date">
  <time datetime="2018-11-11T13:13:47.000Z" itemprop="datePublished">2018-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/编解码/">编解码</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/11/【Codecs系列】FFmpeg中mpeg2编解码器的提取和编译测试/">FFmpeg开源代码提取方法（附mpeg2编解码器提取）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。
        
          <p class="article-more-link">
            <a href="/2018/11/11/【Codecs系列】FFmpeg中mpeg2编解码器的提取和编译测试/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/11/【Codecs系列】FFmpeg中mpeg2编解码器的提取和编译测试/" data-id="cl53ypcr20029zb06owltirai" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Codecs/">Codecs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FFMPEG/">FFMPEG</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【Think系列】对于现在工作的思考20181111" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/11/【Think系列】对于现在工作的思考20181111/" class="article-date">
  <time datetime="2018-11-11T07:13:47.000Z" itemprop="datePublished">2018-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/生活/">生活</a>►<a class="article-category-link" href="/categories/生活/规划/">规划</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/11/【Think系列】对于现在工作的思考20181111/">对于现在工作的思考--20181111</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。
        
          <p class="article-more-link">
            <a href="/2018/11/11/【Think系列】对于现在工作的思考20181111/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/11/【Think系列】对于现在工作的思考20181111/" data-id="cl53ypcvi006qzb060ukt32fm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Plan/">Plan</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Think/">Think</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【Codecs系列】视频编解码标准梳理框架和要点分析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/03/【Codecs系列】视频编解码标准梳理框架和要点分析/" class="article-date">
  <time datetime="2018-11-03T07:13:47.000Z" itemprop="datePublished">2018-11-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/编解码/">编解码</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/03/【Codecs系列】视频编解码标准梳理框架和要点分析/">视频编解码标准梳理框架和要点分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。
        
          <p class="article-more-link">
            <a href="/2018/11/03/【Codecs系列】视频编解码标准梳理框架和要点分析/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/11/03/【Codecs系列】视频编解码标准梳理框架和要点分析/" data-id="cl53ypcsi003ozb06yx6s1xc0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Codecs/">Codecs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【Codecs系列】MPEG-2标准总结文档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/24/【Codecs系列】MPEG-2标准总结文档/" class="article-date">
  <time datetime="2018-10-24T07:13:47.000Z" itemprop="datePublished">2018-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/编解码/">编解码</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/24/【Codecs系列】MPEG-2标准总结文档/">MPEG-2标准总结文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。
        
          <p class="article-more-link">
            <a href="/2018/10/24/【Codecs系列】MPEG-2标准总结文档/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/10/24/【Codecs系列】MPEG-2标准总结文档/" data-id="cl53ypd8o00qizb06lew912qu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Codecs/">Codecs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MPEG2/">MPEG2</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【ios】xcode工程建立和配置（ios真机测试方法）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/27/【ios】xcode工程建立和配置（ios真机测试方法）/" class="article-date">
  <time datetime="2018-09-27T13:45:47.000Z" itemprop="datePublished">2018-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/27/【ios】xcode工程建立和配置（ios真机测试方法）/">xcode工程建立和配置（ios真机测试方法）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="0、参考"><a href="#0、参考" class="headerlink" title="0、参考"></a>0、参考</h2><p><a href="https://blog.csdn.net/snaill/article/details/4092748" target="_blank" rel="noopener">https://blog.csdn.net/snaill/article/details/4092748</a><br><a href="https://blog.csdn.net/lizhongfu2013/article/details/42387311" target="_blank" rel="noopener">https://blog.csdn.net/lizhongfu2013/article/details/42387311</a></p>
<h2 id="1、xcode和ios基本概念"><a href="#1、xcode和ios基本概念" class="headerlink" title="1、xcode和ios基本概念"></a>1、xcode和ios基本概念</h2><h3 id="1-1-clang"><a href="#1-1-clang" class="headerlink" title="1.1 clang"></a>1.1 clang</h3><p>&ensp;&ensp;  Clang是一个C++编写、基于LLVM、发布于LLVM BSD许可证下的C/C++/Objective-C/Objective-C++编译器。它与GNU C语言规范几乎完全兼容(当然，也有部分不兼容的内容，包括编译命令选项也会有点差异)，并在此基础上增加了额外的语法特性，比如C函数重载(通过<strong>attribute</strong>((overloadable))来修饰函数)，其目标(之一)就是超越GCC。<br>参考：<a href="https://www.oschina.net/p/clang" target="_blank" rel="noopener">https://www.oschina.net/p/clang</a></p>
<h3 id="1-2-LLVM"><a href="#1-2-LLVM" class="headerlink" title="1.2  LLVM"></a>1.2  LLVM</h3><p>&ensp;&ensp;LLVM是构架编译器(compiler)的框架系统，以C++编写而成，用于优化以任意程序语言编写的程序的编译时间(compile-time)、链接时间(link-time)、运行时间(run-time)以及空闲时间(idle-time)，对开发者保持开放，并兼容已有脚本。<br>&ensp;&ensp;LLVM计划启动于2000年，最初由美国UIUC大学的Chris Lattner博士主持开展。2006年Chris Lattner加盟Apple Inc.并致力于LLVM在Apple开发体系中的应用。Apple也是LLVM计划的主要资助者。<br>&ensp;&ensp;目前LLVM已经被苹果IOS开发工具、Xilinx Vivado、Facebook、Google等各大公司采用。<br>&ensp;&ensp;LLVM官方参考：<a href="https://llvm.org/" target="_blank" rel="noopener">https://llvm.org/</a></p>
<h3 id="1-3-xcrun"><a href="#1-3-xcrun" class="headerlink" title="1.3  xcrun"></a>1.3  xcrun</h3><p><a href="https://developer.apple.com/library/archive/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html" target="_blank" rel="noopener">https://developer.apple.com/library/archive/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html</a></p>
<h3 id="1-4-xcode"><a href="#1-4-xcode" class="headerlink" title="1.4  xcode"></a>1.4  xcode</h3><p>&ensp;&ensp; Xcode 是运行在操作系统Mac OS X上的集成开发工具(IDE)，由Apple Inc开发。Xcode是开发 macOS 和 iOS 应用程序的最快捷的方式。Xcode 具有统一的用户界面设计，编码、测试、调试都在一个简单的窗口内完成。</p>
<h3 id="1-5-Objective-C"><a href="#1-5-Objective-C" class="headerlink" title="1.5 Objective-C"></a>1.5 Objective-C</h3><p>&ensp;&ensp;  Objective-C，通常写作ObjC或OC和较少用的Objective C或Obj-C，是扩充C的面向对象编程语言。它主要使用于Mac OS X和GNUstep这两个使用OpenStep标准的系统，而在NeXTSTEP和OpenStep中它更是基本语言。<br>&ensp;&ensp; GCC与Clang含Objective-C的编译器，Objective-C可以在GCC以及Clang运作的系统上编译。<br>&ensp;&ensp;  1980年代初布莱德·考克斯(Brad Cox)在其公司Stepstone发明Objective-C。他对软件设计和编程里的真实可用度问题十分关心。Objective-C最主要的描述是他1986年出版的书 Object Oriented Programming: An Evolutionary Approach. Addison Wesley. ISBN 0-201-54834-8.</p>
<h2 id="2、xcode工程建立和配置（ios手机测试库功能的方法）"><a href="#2、xcode工程建立和配置（ios手机测试库功能的方法）" class="headerlink" title="2、xcode工程建立和配置（ios手机测试库功能的方法）"></a>2、xcode工程建立和配置（ios手机测试库功能的方法）</h2><h3 id="2-1-xcode新建工程："><a href="#2-1-xcode新建工程：" class="headerlink" title="2.1 xcode新建工程："></a>2.1 xcode新建工程：</h3><p>（1）用于单元测试：<br>File–&gt;new—&gt;Project—&gt;iOS(application)–&gt;选择single view Application,然后根据提示选择工程路径，即可完成工程的创建。<br>（2）用于库测试：<br>File—&gt;new—&gt;Project—&gt;iOS(FrameWork &amp; Library)—&gt;选择Cocoa Touch Static Libarary，然后根据提示选择工程路径，即可完成工程的创建。</p>
<h3 id="2-2-xcode工程配置："><a href="#2-2-xcode工程配置：" class="headerlink" title="2.2 xcode工程配置："></a>2.2 xcode工程配置：</h3><p>（1）在左上角工程文件名称旁边选择设备名称；<br>（2）在执行工程之前，单击工程名称，需要检查如下配置：<br>a. 单击工程名，在General菜单栏中确认Linked Framework and Libararies下是否需要添加的码流文件或者库文件等；Build Phases中确认Complie Sources（需编译的资源）和Linked Binary with Libaraies（库文件）等。</p>
<blockquote>
<p>注意事项：库文件添加必须通过Build Phases中Linked Binary with Libaraies添加，不能通过将资源拖拽到包（工程）中！</p>
</blockquote>
<p>b. 在Build Setting中确认Architectures：</p>
<p>下面三个选项是与架构平台相关的选项：<br><strong>Architectures：</strong><br>   Space-separated list of identifiers. <strong>Specifies the architectures (ABIs, processor models) to which the binary is targeted.</strong> When this build setting specifies more than one architecture, the generated binary may contain object code for each of the specified architectures.</p>
<p><strong>ONLY_ACTIVE_ARCH</strong>：在需要编译全平台的ios可执行文件时，设置为no，此时VALID_ARCHS无效；否则单独编译某个平台的ios可执行文件时，设置为yes。设置为yes，只编译当前的Architecture和ONLY_ACTIVE_ARCH交集的版本。该选项用于指定是否只对当前连接设备所支持的指令集编译。在xcode6.1中VALID_ARCH默认指定为Standard architectures(armv7,arm64)，这样会编译打包32位和64位的代码。</p>
<p>当其值设置为YES，这个属性设置为yes，是为了debug的时候编译速度更快，它只编译当前的architecture版本，而设置为no时，会编译所有的版本。 编译出的版本是向下兼容的，连接的设备的指令集匹配是由高到低（arm64 &gt; armv7s &gt; armv7）依次匹配的。比如你设置此值为yes，用iphone4编译出来的是armv7版本的，iphone5也可以运行，但是armv6的设备就不能运行。  所以，一般debug的时候可以选择设置为yes，release的时候要改为no，以适应不同设备。</p>
<p><strong>VALID_ARCHS</strong>: ios32: armv7,armv7s   ；ios64: arm64</p>
<p> Space-separated list of identifiers. Specifies the architectures for which the binary may be built. During the build, this list is intersected with the value of ARCHS build setting; the resulting list specifies the architectures the binary can run on. If<br> the resulting architecture list is empty, the target generates no binary.</p>
<p>关于Architectures和VALID_ARCHS的选择，更多可参考：<br><a href="https://blog.csdn.net/lizhongfu2013/article/details/42387311" target="_blank" rel="noopener">https://blog.csdn.net/lizhongfu2013/article/details/42387311</a></p>
<blockquote>
<p>注意事项：ios平台打包所有平台静态库(lib_universal.a)的方法：<br>makefile脚本如下：</p>
</blockquote>
<pre><code>all:
    test -d ../bin/tmp || mkdir ../bin/tmp
    #armv7
    make -C ./dec_lib PLATFORM=ios32
    cp ../lib/ios32/lib_test.a ../bin/tmp/lib_test_ios32.a
    #arm64
    make -C ./dec_lib PLATFORM=ios64
    cp ../lib/ios64/lib_test.a ../bin/tmp/lib_test_ios64.a
    #i386
    make -C ./dec_lib PLATFORM=ios_i386
    cp ../lib/ios_i386/lib_test.a ../bin/tmp/lib_test_ios_i386.a
    #x86_64
    make -C ./dec_lib PLATFORM=ios_x86_64
    cp ../lib/ios_x86_64/lib_test.a ../bin/tmp/lib_test_ios_x86_64.a
    libpo -create ../bin/tmp/* -output ../lib/libtest_univesal.a
    rm -rf ../bin/tmp</code></pre><p>（3）添加demo文件（main.c，头文件）。将demo文件和库文件拷贝到刚刚建立的xcode工程下面，在工程名上右键–&gt;add files to xxx—&gt;选择需要添加的文件完成文件添加。<br>（4）工程设置。点击工程名—&gt;build settings—&gt;code signing–&gt;设置code signing identity中的项目（debug/release）。<br>（5）添加静态库文件。点击工程名—&gt;build phases—&gt;link binary with libraries—&gt;将需要添加的库加进来。<br>（6）添加资源文件。点击工程名—&gt;build phases—-&gt;copy bundle resourses—&gt;将需要的资源文件添加进来。<br>（7）读取码流文件。点击itools工具—&gt;选择新建的app名字—-&gt;点击文件夹符号—-&gt;documents—-&gt;导入—–&gt;选中需要导入的测试码流。需要注意读取码流文件时的路径应该也是手机中documnent目录。<br>（8）在app控件初始化函数中添加代码。在主函数中需添加在ViewController.m的viewDidLoad函数中，作为一个普通函数调用：<br>例如：</p>
<pre><code class="c">int main_test(int argc, char *argv[], char *pin, char *pout); //函数声明
-(void) viewDidLoad{
[super viewDidLoad];
NSArray* array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);//当前报的域指向对应手机中的文件指针
NSString* strDocument = [array objectAtIndex:0];
NSString* outfilePath = [strDocument stringByAppendingPathComponent:@&quot;test_out.yuv&quot;];//输出路径需要在手机相应的document下！
NSLog(@&quot;output path is %@&quot;,outfilePath); //用于打印数据
NSString* InputfilePath = [[NSBundle mainBundle] pathForResource:@&quot;svac2&quot;];//输入文件可以直接使用包的路径，这样，码流文件放在包（工程）中即可。

NSLog(@&quot;input mainBudle path is %@&quot;,InputfilePath);
main_test(0,NULL,[InputfilePath UTF8String],[outputtfilePath UTF8String]);//demo文件传入相应参数
}</code></pre>
<blockquote>
<p>说明:将我们自己的库demo加入到xcode工程中的方法的进一步说明：<br>测试描述：新建一个简单的app工程，将原来我们自己的库demo添加到app中测试，可以将main_test()函数添加到app控件初始化函数下（需要将demo文件中的main函数修改为main_test函数名），这样控件初始化的时候，就可以执行main_test()函数。</p>
</blockquote>
<p>（9）从手机中获取xcode工程生成的yuv文件或者log文件：<br>a. 在launchpad中找到iTools；<br>b. 在应用中找到进行解码的xcode工程名称，比如test_demo，然后选中工程右键选择文档；然后点击所需要的文件导出即可。</p>
<p>（10）一个xcode工程既可以运行arm_ios32汇编，也可以运行arm_ios64汇编，需要选中TARGETS进行相应修改：<br>a. 在工程设置Build_settings下Architectures—-ONLY_ACTIVE_ARCH设为Yes;<br>b. 在工程设置Build_settings下Architectures—-VALID_ARCHS中<br>  ios32: armv7<br>  ios64: arm64</p>
<h3 id="2-3-测试环境："><a href="#2-3-测试环境：" class="headerlink" title="2.3 测试环境："></a>2.3 测试环境：</h3><p>mac（xcode6.1环境）+iphone SE<br>ios 32位测试机：iphone 5c （苹果A6（Cortex-A7处理器），32位双核处理器，1G运行内存，架构：armv7s）<br>ios 64位测试机： iphone 6s （苹果A9，64位双核处理器，2G运行内存，架构：arm64）</p>
<h3 id="2-4-运行："><a href="#2-4-运行：" class="headerlink" title="2.4 运行："></a>2.4 运行：</h3><ol>
<li>用数据线连接苹果手机</li>
<li>点击xcode中的运行按钮或者Fn+F6，即可完成编译和运行。</li>
<li>生成的yuv文件或者log文件在手机的document目录下面。</li>
<li>在使用xcode IDE过程中，可以设置断点进行单步调试或者采用NSLog函数打印相关信息。</li>
</ol>
<h3 id="2-5-补充知识："><a href="#2-5-补充知识：" class="headerlink" title="2.5 补充知识："></a>2.5 补充知识：</h3><p>ios/mac相关编译器、系统库和头文件的选择及其路径：<br>1、编译器路径：<br>无论是对于ios还是ios simulator都是这个路径：</p>
<pre><code>/Applications/Xcode6.4.app/Contents/Developer/ToolChains/XcodeDefault.xctoolchain/usr/bin/clang</code></pre><p>2、系统库和头文件路径：<br>在路径/Applications/Xcode.app/Contents/Developer/Platforms下面</p>
<p>3、查看编译器或工具的路径：</p>
<pre><code>xcrun -sdk iphonesimulator -find
xcrun -sdk iphoneos -find
xcrun -sdk macos -find clang</code></pre><hr>
<h2 id="THE-END！"><a href="#THE-END！" class="headerlink" title="THE END！"></a><font color="red"><strong>THE END！</strong></font></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/09/27/【ios】xcode工程建立和配置（ios真机测试方法）/" data-id="cl53ypd7t00olzb06biqvspb6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【PE系列】mac和ios通用编译环境" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/26/【PE系列】mac和ios通用编译环境/" class="article-date">
  <time datetime="2018-09-26T13:45:47.000Z" itemprop="datePublished">2018-09-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/工程化/">工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/26/【PE系列】mac和ios通用编译环境/">mac和ios通用编译环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<h2 id="1、MAC编译环境配置"><a href="#1、MAC编译环境配置" class="headerlink" title="1、MAC编译环境配置"></a>1、MAC编译环境配置</h2><p><strong>mac32：</strong></p>
<pre><code>ifeq ( $(findstring mac32, $(platform)), mac32)
CC = gcc
CPP = g++
LD = ld
AR = ar
CFLAGS += -fPIC -arch i386 -m32
LDFLAGS += -Wl,  -Bsymbolic-functions
LDFLAGS += -m32 -read_only_relocs suppress
endif</code></pre><p><strong>mac64：</strong></p>
<pre><code>ifeq ( $(findstring mac64, $(platform)), mac64)
CC = gcc
CPP = g++
LD = ld
AR = ar
CFLAGS += -fPIC  -arch x86_64  -m64
LDFLAGS += -Wl,  -Bsymbolic-functions -m64
LDFLAGS += -m64 -read_only_relocs suppress
endif</code></pre><h2 id="2、ios编译环境配置"><a href="#2、ios编译环境配置" class="headerlink" title="2、ios编译环境配置"></a>2、ios编译环境配置</h2><p><strong>ios32：</strong></p>
<pre><code>ifeq ( $(findstring ios32, $(platform)), ios32)
CC = xcrun -sdk iphoneos clang
CPP = xcrun -sdk iphoneos clang
AR = ar
CFLAGS += -arch armv7 -mios-version-min=6.0  -march=armv7-a
LDFLAGS += -arch armv7 -mios-version-min=6.0  -march=armv7-a  -Wl,  -Bsymbolic-functions -read_only_relocs suppress
endif</code></pre><p><strong>ios64：</strong></p>
<pre><code>ifeq ( $(findstring ios64, $(platform)), ios64)
CC = xcrun -sdk iphoneos clang
CPP = xcrun -sdk iphoneos clang
AR = ar
CFLAGS += -Wall -O3 -arch arm64 -mios-version-min=6.0  
LDFLAGS += -arch arm64 -mios-version-min=6.0   -Wl,  -Bsymbolic-functions
endif</code></pre><p><strong>i386模拟器环境：</strong></p>
<pre><code>ifeq ( $(findstring ios_i386, $(platform)), ios_i386)
CC = xcrun -sdk iphonesimulator clang
CPP = xcrun -sdk iphonesimulator clang
AR = ar
CFLAGS += -Wall -O3 -arch i386 -mios-simulator-version-min=6.0  -DIOS
LDFLAGS += -arch i386  -mios-simulator-version-min=6.0   -Wl,  -Bsymbolic-functions
endif</code></pre><p><strong>x86_64模拟器环境：</strong></p>
<pre><code>ifeq ( $(findstring ios_x86_64, $(platform)), ios_x86_64)
CC = xcrun -sdk iphonesimulator clang
CPP = xcrun -sdk iphonesimulator clang
AR = ar
CFLAGS += -Wall -O3 -arch x86_64 -mios-simulator-version-min=6.0  -DIOS
LDFLAGS += -arch x86_64 -mios-simulator-version-min=6.0   -Wl,  -Bsymbolic-functions
endif</code></pre><hr>
<h2 id="THE-END"><a href="#THE-END" class="headerlink" title="THE END! "></a><font color="red"><strong>THE END!</strong> </font></h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/09/26/【PE系列】mac和ios通用编译环境/" data-id="cl53ypcvb005vzb06fqhftbtg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/makefile/">makefile</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-【Codecs系列】FFMPEG 命令行常用方法示例（含yuv处理命令）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/20/【Codecs系列】FFMPEG 命令行常用方法示例（含yuv处理命令）/" class="article-date">
  <time datetime="2018-09-20T13:13:47.000Z" itemprop="datePublished">2018-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>►<a class="article-category-link" href="/categories/技术/编解码/">编解码</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/20/【Codecs系列】FFMPEG 命令行常用方法示例（含yuv处理命令）/">FFMPEG 命令行常用方法示例（含yuv处理命令）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。
        
          <p class="article-more-link">
            <a href="/2018/09/20/【Codecs系列】FFMPEG 命令行常用方法示例（含yuv处理命令）/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://soaringleefighting.github.io/2018/09/20/【Codecs系列】FFMPEG 命令行常用方法示例（含yuv处理命令）/" data-id="cl53ypcr10026zb06czfp62ug" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Codecs/">Codecs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FFMPEG/">FFMPEG</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/12/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/14/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/">产品</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/产品/视频会议/">视频会议</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/">工具</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/工具/Linux工具/">Linux工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/macOS工具/">macOS工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/多线程编程/">多线程编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/编译工具/">编译工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/自动化脚本/">自动化脚本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具/调试工具/">调试工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Bugfix/">Bugfix</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/优化/">优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/图像处理/">图像处理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/工程化/">工程化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/开源项目/">开源项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/数据结构/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/编程语言/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/编解码/">编解码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/视频处理/">视频处理</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/生活/规划/">规划</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/随笔/">随笔</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/音乐/">音乐</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/">读书</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/读书/书单/">书单</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书/读书笔记/">读书笔记</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AVS/">AVS+</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Books/">Books</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bugs/">Bugs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMake/">CMake</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSConvert/">CSConvert</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CV/">CV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codecs/">Codecs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Conda/">Conda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DSP/">DSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFMPEG/">FFMPEG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GDB/">GDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gnu/">Gnu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/H263/">H263</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HEVC/">HEVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIPS/">MIPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MPEG2/">MPEG2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MinGW/">MinGW</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Plan/">Plan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReadingList/">ReadingList</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SecureCRT/">SecureCRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Solaris/">Solaris</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Think/">Think</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Video/">Video</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wasm/">Wasm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/X86/">X86</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/YUV/">YUV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cygwin/">cygwin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gprof/">gprof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/makefile/">makefile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/meson/">meson</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mount/">mount</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sample/">sample</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/valgrind/">valgrind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windbg/">windbg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/吉他/">吉他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/年终总结/">年终总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/批处理/">批处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/视频会议/">视频会议</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARM/" style="font-size: 18.18px;">ARM</a> <a href="/tags/AVS/" style="font-size: 10.91px;">AVS+</a> <a href="/tags/Android/" style="font-size: 12.73px;">Android</a> <a href="/tags/Books/" style="font-size: 19.09px;">Books</a> <a href="/tags/Bugs/" style="font-size: 11.82px;">Bugs</a> <a href="/tags/C/" style="font-size: 12.73px;">C</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CMake/" style="font-size: 10px;">CMake</a> <a href="/tags/CSConvert/" style="font-size: 17.27px;">CSConvert</a> <a href="/tags/CV/" style="font-size: 15.45px;">CV</a> <a href="/tags/Codecs/" style="font-size: 20px;">Codecs</a> <a href="/tags/Conda/" style="font-size: 10px;">Conda</a> <a href="/tags/DSP/" style="font-size: 10px;">DSP</a> <a href="/tags/Data-Structure/" style="font-size: 14.55px;">Data Structure</a> <a href="/tags/FFMPEG/" style="font-size: 10.91px;">FFMPEG</a> <a href="/tags/GDB/" style="font-size: 10px;">GDB</a> <a href="/tags/Git/" style="font-size: 12.73px;">Git</a> <a href="/tags/Gnu/" style="font-size: 10px;">Gnu</a> <a href="/tags/H263/" style="font-size: 10px;">H263</a> <a href="/tags/HEVC/" style="font-size: 10.91px;">HEVC</a> <a href="/tags/Life/" style="font-size: 11.82px;">Life</a> <a href="/tags/MIPS/" style="font-size: 11.82px;">MIPS</a> <a href="/tags/MPEG2/" style="font-size: 10px;">MPEG2</a> <a href="/tags/MinGW/" style="font-size: 10px;">MinGW</a> <a href="/tags/Plan/" style="font-size: 10px;">Plan</a> <a href="/tags/Python/" style="font-size: 15.45px;">Python</a> <a href="/tags/ReadingList/" style="font-size: 12.73px;">ReadingList</a> <a href="/tags/SecureCRT/" style="font-size: 10px;">SecureCRT</a> <a href="/tags/Solaris/" style="font-size: 10px;">Solaris</a> <a href="/tags/Think/" style="font-size: 14.55px;">Think</a> <a href="/tags/Tools/" style="font-size: 13.64px;">Tools</a> <a href="/tags/VS/" style="font-size: 10px;">VS</a> <a href="/tags/Video/" style="font-size: 16.36px;">Video</a> <a href="/tags/Wasm/" style="font-size: 10.91px;">Wasm</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/X86/" style="font-size: 15.45px;">X86</a> <a href="/tags/YUV/" style="font-size: 14.55px;">YUV</a> <a href="/tags/cygwin/" style="font-size: 10px;">cygwin</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/gprof/" style="font-size: 10px;">gprof</a> <a href="/tags/hexo/" style="font-size: 10.91px;">hexo</a> <a href="/tags/ios/" style="font-size: 10px;">ios</a> <a href="/tags/linux/" style="font-size: 15.45px;">linux</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/makefile/" style="font-size: 15.45px;">makefile</a> <a href="/tags/meson/" style="font-size: 10px;">meson</a> <a href="/tags/mount/" style="font-size: 10px;">mount</a> <a href="/tags/sample/" style="font-size: 10px;">sample</a> <a href="/tags/shell/" style="font-size: 10.91px;">shell</a> <a href="/tags/valgrind/" style="font-size: 10.91px;">valgrind</a> <a href="/tags/windbg/" style="font-size: 10px;">windbg</a> <a href="/tags/吉他/" style="font-size: 10px;">吉他</a> <a href="/tags/年终总结/" style="font-size: 10.91px;">年终总结</a> <a href="/tags/批处理/" style="font-size: 10px;">批处理</a> <a href="/tags/视频会议/" style="font-size: 10px;">视频会议</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/28/【Python系列】自动提取特定格式的txt文本数据到excel中/">自动提取特定格式的txt文本数据到excel中</a>
          </li>
        
          <li>
            <a href="/2022/05/25/【Books系列】2022年：《慢慢变富》读书笔记/">《慢慢变富》读书笔记</a>
          </li>
        
          <li>
            <a href="/2022/03/28/【Tools系列】CMake入门基础（1）：CMake语法/">CMake入门基础（1）：CMake语法</a>
          </li>
        
          <li>
            <a href="/2022/01/23/【Books系列】2022年：《拼职场》读书笔记/">《拼职场》读书笔记</a>
          </li>
        
          <li>
            <a href="/2022/01/08/【Codecs系列】H.265:HEVC视频编码技术/">H.265/HEVC视频编码技术</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Soaring Lee<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haru02.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":20,"vOffset":50},"mobile":{"show":true,"scale":0.8},"react":{"opacity":0.7},"log":false});</script></body>
</html>